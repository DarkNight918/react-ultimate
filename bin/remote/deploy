#!/bin/sh
set -ue

# Go to project folder
cd ~/${PROJECT_HOST}

# TODO: consider $ git clean [-f]
# TODO: consider just $ git pull
# Pull git branch with "force" semantics
git fetch --all
git reset --hard origin/master

# Install package.json deps
npm install --production

# Restart service
sudo systemctl restart ${PROJECT_SERVICE}

# Go to home folder
cd ~

# Finish
echo "DEPLOY FINISHED"
