#!/bin/sh
# We should run tests against commited state, not working dir state
# So we stash / unstash non-staged changes
# git commit / push invoke git hooks and npm test via husky

set -ue

if ${stash}; then
  git stash save --keep-index
fi

if gulp dist; then
  git commit ${@};
fi

if ${stash}; then
  git stash apply
fi
